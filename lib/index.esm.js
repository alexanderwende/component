import{html as e,render as t}from"lit-html";import*as s from"lit-html";export{s as lit};const r=/\s+([\S])/g,o=/[a-z]([A-Z])/g;function n(e){let t;if(e){for(e=e.trim();t=r.exec(e);)e=e.replace(t[0],"-"+t[1]),r.lastIndex=0;for(;t=o.exec(e);)e=e.replace(t[0],t[0][0]+"-"+t[1]),o.lastIndex=0}return e?e.toLowerCase():e}class i extends HTMLElement{constructor(){super(),this._updateRequest=new Promise(e=>e(!0)),this._changedProperties=new Map,this._isConnected=!1,this._hasRequestedUpdate=!1,this._renderRoot=this.createRenderRoot(),console.log("constructed... ",this.constructor.name)}static get observedAttributes(){return[]}get isConnected(){return this._isConnected}createRenderRoot(){return this.constructor.shadow?this.attachShadow({mode:"open"}):this}adoptedCallback(){}connectedCallback(){console.log("connected... ",this.constructor.name),this.requestUpdate()}disconnectedCallback(){console.log("disconnected... ",this.constructor.name)}attributeChangedCallback(e,t,s){}propertyChangedCallback(e,t,s){}template(){return e``}render(){console.log("render()... ",this.constructor.name),t(this.template(),this._renderRoot),this.renderCallback()}renderCallback(){console.log("rendered... ",this.constructor.name)}update(e){console.log("update()... ",e),this.render(),e.forEach((e,t)=>{const s=this._getPropertyDeclaration(t),r=this[t];s.reflect&&this._reflect(t,e,r),s.notify&&this._notify(t,e,r)})}_notify(e,t,s){const r=`${n(e)}-changed`;this.dispatchEvent(new CustomEvent(r,{composed:!0,detail:{property:e,previous:t,current:s}}))}_reflect(e,t,s){const r=n(e);null===s?this.removeAttribute(r):this.setAttribute(r,s)}requestUpdate(e,t,s){console.log("requestUpdate()... ",this.constructor.name);const r=this.constructor;if(e&&e in r.propertyDeclarations){const o=r.propertyDeclarations[e];if(!o.observe)return this._updateRequest;if(o.hasChanged&&!o.hasChanged(t,s))return this._updateRequest;this._changedProperties.set(e,t)}return this._hasRequestedUpdate||this._enqueueUpdate(),this._updateRequest}_performUpdate(){return console.log("performUpdate()... ",this.constructor.name),new Promise(e=>{requestAnimationFrame(()=>{this.update(this._changedProperties),this._changedProperties=new Map,this._hasRequestedUpdate=!1,e()})})}async _enqueueUpdate(){let e;console.log("enqueueUpdate()... ",this.constructor.name);const t=this._updateRequest;this._hasRequestedUpdate=!0,this._updateRequest=new Promise(t=>e=t),await t;const s=this._performUpdate();await s,e(!this._hasRequestedUpdate)}_getPropertyDeclaration(e){return this.constructor.propertyDeclarations[e]}}i.propertyDeclarations={};const a={selector:"custom-element",shadow:!0,define:!0},c=e=>(e=Object.assign({},a,e),t=>{t.selector="selector"in e?e.selector:t.selector,t.shadow=e.shadow,e.define&&window.customElements.define(t.selector,t)});const h={observe:!0,notify:!1,reflect:!1,hasChanged:(e,t)=>e!==t&&(e==e||t==t),toAttribute:e=>e.toString(),fromAttribute:e=>e},d=(e={})=>(t,s)=>{const r=function(e,t){if(t in e)for(;e!==Object.prototype;){if(e.hasOwnProperty(t))return Object.getOwnPropertyDescriptor(e,t);e=Object.getPrototypeOf(e)}}(t,s),o="string"==typeof s?`_${s}`:Symbol(),n=r&&r.get||function(){return this[o]},i=r&&r.set||function(e){this[o]=e};Object.defineProperty(t,s,{configurable:!0,enumerable:!0,get(){return n.call(this)},set(e){console.log(`setting ${s}...`,e);const t=this[s];i.call(this,e),this.requestUpdate(s,t,e)}}),t.constructor.propertyDeclarations[s]=Object.assign({},h,e)};export{i as CustomElement,a as DEFAULT_CUSTOM_ELEMENT_DECLARATION,c as customElement,h as DEFAULT_PROPERTY_DECLARATION,d as property};
//# sourceMappingURL=index.esm.js.map
