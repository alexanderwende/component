import{html as e,render as t}from"lit-html";import*as r from"lit-html";export{r as lit};const s=/\s+([\S])/g,o=/[a-z]([A-Z])/g;function n(e){let t;if(e){for(e=e.trim();t=s.exec(e);)e=e.replace(t[0],"-"+t[1]),s.lastIndex=0;for(;t=o.exec(e);)e=e.replace(t[0],t[0][0]+"-"+t[1]),o.lastIndex=0}return e?e.toLowerCase():e}class a extends HTMLElement{constructor(){super(),this._updateRequest=new Promise(e=>e(!0)),this._changedProperties=new Map,this._isConnected=!1,this._hasRequestedUpdate=!1,this._renderRoot=this.createRenderRoot(),console.log("constructed... ",this.constructor.name)}static get observedAttributes(){return[]}get isConnected(){return this._isConnected}createRenderRoot(){return this.constructor.shadow?this.attachShadow({mode:"open"}):this}adoptedCallback(){}connectedCallback(){console.log("connected... ",this.constructor.name),this.requestUpdate()}disconnectedCallback(){console.log("disconnected... ",this.constructor.name)}attributeChangedCallback(e,t,r){}propertyChangedCallback(e,t,r){}template(){return e``}render(){console.log("render()... ",this.constructor.name),t(this.template(),this._renderRoot),this.renderCallback()}renderCallback(){console.log("rendered... ",this.constructor.name)}update(e){console.log("update()... ",e),this.render(),e.forEach((e,t)=>{const r=this._getPropertyDeclaration(t),s=this[t];r.reflect&&this._reflect(t,e,s),r.notify&&this._notify(t,e,s)})}_notify(e,t,r){const s=`${n(e)}-changed`;this.dispatchEvent(new CustomEvent(s,{composed:!0,detail:{property:e,previous:t,current:r}}))}_reflect(e,t,r){const s=n(e);null===r?this.removeAttribute(s):this.setAttribute(s,r)}requestUpdate(e,t,r){console.log("requestUpdate()... ",this.constructor.name);const s=this.constructor;if(e&&e in s.propertyDeclarations){const o=s.propertyDeclarations[e];if(!o.observe)return this._updateRequest;if(o.hasChanged&&!o.hasChanged(t,r))return this._updateRequest;this._changedProperties.set(e,t)}return this._hasRequestedUpdate||this._enqueueUpdate(),this._updateRequest}_performUpdate(){return console.log("performUpdate()... ",this.constructor.name),new Promise(e=>{requestAnimationFrame(()=>{this.update(this._changedProperties),this._changedProperties=new Map,this._hasRequestedUpdate=!1,e()})})}async _enqueueUpdate(){let e;console.log("enqueueUpdate()... ",this.constructor.name);const t=this._updateRequest;this._hasRequestedUpdate=!0,this._updateRequest=new Promise(t=>e=t),await t;const r=this._performUpdate();await r,e(!this._hasRequestedUpdate)}_getPropertyDeclaration(e){return this.constructor.propertyDeclarations[e]}}a.propertyDeclarations={};const i={selector:"",shadow:!0,define:!0},c=(e={})=>(e=Object.assign({},i,e),t=>{t.selector=e.selector?e.selector:t.selector,t.shadow=e.shadow,e.define&&window.customElements.define(t.selector,t)});const h={observe:!0,notify:!1,reflect:!1,hasChanged:(e,t)=>e!==t&&(e==e||t==t),toAttribute:e=>e.toString(),fromAttribute:e=>e},d=(e={})=>(t,r)=>{const s=function(e,t){if(t in e)for(;e!==Object.prototype;){if(e.hasOwnProperty(t))return Object.getOwnPropertyDescriptor(e,t);e=Object.getPrototypeOf(e)}}(t,r),o="string"==typeof r?`_${r}`:Symbol(),n=s&&s.get||function(){return this[o]},a=s&&s.set||function(e){this[o]=e};Object.defineProperty(t,r,{configurable:!0,enumerable:!0,get(){return n.call(this)},set(e){console.log(`setting ${r}...`,e);const t=this[r];a.call(this,e),this.requestUpdate(r,t,e)}}),t.constructor.propertyDeclarations[r]=Object.assign({},h,e)};export{a as CustomElement,i as DEFAULT_CUSTOM_ELEMENT_DECLARATION,c as customElement,h as DEFAULT_PROPERTY_DECLARATION,d as property};
//# sourceMappingURL=index.esm.js.map
